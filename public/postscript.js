(function(){var ge='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg>',oe='<svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true"><path fill-rule="evenodd" fill="rgb(63, 185, 80)" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg>';document.addEventListener("nav",()=>{let he=document.getElementsByTagName("pre");for(let ee=0;ee<he.length;ee++){let se=he[ee].getElementsByTagName("code")[0];if(se){let te=function(){navigator.clipboard.writeText(Oe).then(()=>{ie.blur(),ie.innerHTML=oe,setTimeout(()=>{ie.innerHTML=ge,ie.style.borderColor=""},2e3)},qe=>console.error(qe))};var F=te;let Oe=(se.dataset.clipboard?JSON.parse(se.dataset.clipboard):se.innerText).replace(/\n\n/g,`
`),ie=document.createElement("button");ie.className="clipboard-button",ie.type="button",ie.innerHTML=ge,ie.ariaLabel="Copy source",ie.addEventListener("click",te),window.addCleanup(()=>ie.removeEventListener("click",te)),he[ee].prepend(ie)}}})})(),(function(){var ge=Object.create,oe=Object.defineProperty,he=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,ee=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty,te=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Oe=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of F(t))!se.call(e,r)&&r!==i&&oe(e,r,{get:()=>t[r],enumerable:!(n=he(t,r))||n.enumerable});return e},ie=(e,t,i)=>(i=e!=null?ge(ee(e)):{},Oe(t||!e||!e.__esModule?oe(i,"default",{value:e,enumerable:!0}):i,e)),qe=te(()=>{}),We=te((e,t)=>{"use strict";t.exports=n;function i(s){return s instanceof Buffer?Buffer.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function n(s){if(s=s||{},s.circles)return r(s);let l=new Map;if(l.set(Date,f=>new Date(f)),l.set(Map,(f,w)=>new Map(h(Array.from(f),w))),l.set(Set,(f,w)=>new Set(h(Array.from(f),w))),s.constructorHandlers)for(let f of s.constructorHandlers)l.set(f[0],f[1]);let o=null;return s.proto?u:c;function h(f,w){let a=Object.keys(f),g=new Array(a.length);for(let p=0;p<a.length;p++){let d=a[p],x=f[d];typeof x!="object"||x===null?g[d]=x:x.constructor!==Object&&(o=l.get(x.constructor))?g[d]=o(x,w):ArrayBuffer.isView(x)?g[d]=i(x):g[d]=w(x)}return g}function c(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return h(f,c);if(f.constructor!==Object&&(o=l.get(f.constructor)))return o(f,c);let w={};for(let a in f){if(Object.hasOwnProperty.call(f,a)===!1)continue;let g=f[a];typeof g!="object"||g===null?w[a]=g:g.constructor!==Object&&(o=l.get(g.constructor))?w[a]=o(g,c):ArrayBuffer.isView(g)?w[a]=i(g):w[a]=c(g)}return w}function u(f){if(typeof f!="object"||f===null)return f;if(Array.isArray(f))return h(f,u);if(f.constructor!==Object&&(o=l.get(f.constructor)))return o(f,u);let w={};for(let a in f){let g=f[a];typeof g!="object"||g===null?w[a]=g:g.constructor!==Object&&(o=l.get(g.constructor))?w[a]=o(g,u):ArrayBuffer.isView(g)?w[a]=i(g):w[a]=u(g)}return w}}function r(s){let l=[],o=[],h=new Map;if(h.set(Date,a=>new Date(a)),h.set(Map,(a,g)=>new Map(u(Array.from(a),g))),h.set(Set,(a,g)=>new Set(u(Array.from(a),g))),s.constructorHandlers)for(let a of s.constructorHandlers)h.set(a[0],a[1]);let c=null;return s.proto?w:f;function u(a,g){let p=Object.keys(a),d=new Array(p.length);for(let x=0;x<p.length;x++){let b=p[x],E=a[b];if(typeof E!="object"||E===null)d[b]=E;else if(E.constructor!==Object&&(c=h.get(E.constructor)))d[b]=c(E,g);else if(ArrayBuffer.isView(E))d[b]=i(E);else{let $=l.indexOf(E);$!==-1?d[b]=o[$]:d[b]=g(E)}}return d}function f(a){if(typeof a!="object"||a===null)return a;if(Array.isArray(a))return u(a,f);if(a.constructor!==Object&&(c=h.get(a.constructor)))return c(a,f);let g={};l.push(a),o.push(g);for(let p in a){if(Object.hasOwnProperty.call(a,p)===!1)continue;let d=a[p];if(typeof d!="object"||d===null)g[p]=d;else if(d.constructor!==Object&&(c=h.get(d.constructor)))g[p]=c(d,f);else if(ArrayBuffer.isView(d))g[p]=i(d);else{let x=l.indexOf(d);x!==-1?g[p]=o[x]:g[p]=f(d)}}return l.pop(),o.pop(),g}function w(a){if(typeof a!="object"||a===null)return a;if(Array.isArray(a))return u(a,w);if(a.constructor!==Object&&(c=h.get(a.constructor)))return c(a,w);let g={};l.push(a),o.push(g);for(let p in a){let d=a[p];if(typeof d!="object"||d===null)g[p]=d;else if(d.constructor!==Object&&(c=h.get(d.constructor)))g[p]=c(d,w);else if(ArrayBuffer.isView(d))g[p]=i(d);else{let x=l.indexOf(d);x!==-1?g[p]=o[x]:g[p]=w(d)}}return l.pop(),o.pop(),g}}}),j;function ne(e,t,i){let n=typeof i,r=typeof e;if(n!=="undefined"){if(r!=="undefined"){if(i){if(r==="function"&&n===r)return function(o){return e(i(o))};if(t=e.constructor,t===i.constructor){if(t===Array)return i.concat(e);if(t===Map){var s=new Map(i);for(var l of e)s.set(l[0],l[1]);return s}if(t===Set){l=new Set(i);for(s of e.values())l.add(s);return l}}}return e}return i}return r==="undefined"?t:e}function Ce(e,t){return typeof e>"u"?t:e}function X(){return Object.create(null)}function ae(e){return typeof e=="string"}function be(e){return typeof e=="object"}function ze(e,t){if(ae(t))e=e[t];else for(let i=0;e&&i<t.length;i++)e=e[t[i]];return e}var Le=/[^\p{L}\p{N}]+/u,yt=/(\d{3})/g,et=/(\D)(\d{3})/g,Ue=/(\d{3})(\D)/g,tt=/[\u0300-\u036f]/g;function ve(e={}){if(!this||this.constructor!==ve)return new ve(...arguments);if(arguments.length)for(e=0;e<arguments.length;e++)this.assign(arguments[e]);else this.assign(e)}j=ve.prototype,j.assign=function(e){this.normalize=ne(e.normalize,!0,this.normalize);let t=e.include,i=t||e.exclude||e.split,n;if(i||i===""){if(typeof i=="object"&&i.constructor!==RegExp){let r="";n=!t,t||(r+="\\p{Z}"),i.letter&&(r+="\\p{L}"),i.number&&(r+="\\p{N}",n=!!t),i.symbol&&(r+="\\p{S}"),i.punctuation&&(r+="\\p{P}"),i.control&&(r+="\\p{C}"),(i=i.char)&&(r+=typeof i=="object"?i.join(""):i);try{this.split=new RegExp("["+(t?"^":"")+r+"]+","u")}catch{this.split=/\s+/}}else this.split=i,n=i===!1||"a1a".split(i).length<2;this.numeric=ne(e.numeric,n)}else{try{this.split=ne(this.split,Le)}catch{this.split=/\s+/}this.numeric=ne(e.numeric,ne(this.numeric,!0))}if(this.prepare=ne(e.prepare,null,this.prepare),this.finalize=ne(e.finalize,null,this.finalize),i=e.filter,this.filter=typeof i=="function"?i:ne(i&&new Set(i),null,this.filter),this.dedupe=ne(e.dedupe,!0,this.dedupe),this.matcher=ne((i=e.matcher)&&new Map(i),null,this.matcher),this.mapper=ne((i=e.mapper)&&new Map(i),null,this.mapper),this.stemmer=ne((i=e.stemmer)&&new Map(i),null,this.stemmer),this.replacer=ne(e.replacer,null,this.replacer),this.minlength=ne(e.minlength,1,this.minlength),this.maxlength=ne(e.maxlength,1024,this.maxlength),this.rtl=ne(e.rtl,!1,this.rtl),(this.cache=i=ne(e.cache,!0,this.cache))&&(this.F=null,this.L=typeof i=="number"?i:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(let r of this.matcher.keys())this.h+=(this.h?"|":"")+r;if(this.stemmer)for(let r of this.stemmer.keys())this.A+=(this.A?"|":"")+r;return this},j.addStemmer=function(e,t){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(e,t),this.A+=(this.A?"|":"")+e,this.K=null,this.cache&&xe(this),this},j.addFilter=function(e){return typeof e=="function"?this.filter=e:(this.filter||(this.filter=new Set),this.filter.add(e)),this.cache&&xe(this),this},j.addMapper=function(e,t){return typeof e=="object"?this.addReplacer(e,t):e.length>1?this.addMatcher(e,t):(this.mapper||(this.mapper=new Map),this.mapper.set(e,t),this.cache&&xe(this),this)},j.addMatcher=function(e,t){return typeof e=="object"?this.addReplacer(e,t):e.length<2&&(this.dedupe||this.mapper)?this.addMapper(e,t):(this.matcher||(this.matcher=new Map),this.matcher.set(e,t),this.h+=(this.h?"|":"")+e,this.J=null,this.cache&&xe(this),this)},j.addReplacer=function(e,t){return typeof e=="string"?this.addMatcher(e,t):(this.replacer||(this.replacer=[]),this.replacer.push(e,t),this.cache&&xe(this),this)},j.encode=function(e,t){if(this.cache&&e.length<=this.H)if(this.F){if(this.B.has(e))return this.B.get(e)}else this.F=setTimeout(xe,50,this);this.normalize&&(typeof this.normalize=="function"?e=this.normalize(e):e=tt?e.normalize("NFKD").replace(tt,"").toLowerCase():e.toLowerCase()),this.prepare&&(e=this.prepare(e)),this.numeric&&e.length>3&&(e=e.replace(et,"$1 $2").replace(Ue,"$1 $2").replace(yt,"$1 "));let i=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer),n=[],r=X(),s,l,o=this.split||this.split===""?e.split(this.split):[e];for(let c=0,u,f;c<o.length;c++)if((u=f=o[c])&&!(u.length<this.minlength||u.length>this.maxlength)){if(t){if(r[u])continue;r[u]=1}else{if(s===u)continue;s=u}if(i)n.push(u);else if(!this.filter||(typeof this.filter=="function"?this.filter(u):!this.filter.has(u))){if(this.cache&&u.length<=this.I)if(this.F){var h=this.D.get(u);if(h||h===""){h&&n.push(h);continue}}else this.F=setTimeout(xe,50,this);if(this.stemmer){this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));let w;for(;w!==u&&u.length>2;)w=u,u=u.replace(this.K,a=>this.stemmer.get(a))}if(u&&(this.mapper||this.dedupe&&u.length>1)){h="";for(let w=0,a="",g,p;w<u.length;w++)g=u.charAt(w),g===a&&this.dedupe||((p=this.mapper&&this.mapper.get(g))||p===""?p===a&&this.dedupe||!(a=p)||(h+=p):h+=a=g);u=h}if(this.matcher&&u.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),u=u.replace(this.J,w=>this.matcher.get(w))),u&&this.replacer)for(h=0;u&&h<this.replacer.length;h+=2)u=u.replace(this.replacer[h],this.replacer[h+1]);if(this.cache&&f.length<=this.I&&(this.D.set(f,u),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),u){if(u!==f)if(t){if(r[u])continue;r[u]=1}else{if(l===u)continue;l=u}n.push(u)}}}return this.finalize&&(n=this.finalize(n)||n),this.cache&&e.length<=this.H&&(this.B.set(e,n),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),n};function xe(e){e.F=null,e.B.clear(),e.D.clear()}function it(e,t,i){i||(t||typeof e!="object"?typeof t=="object"&&(i=t,t=0):i=e),i&&(e=i.query||e,t=i.limit||t);let n=""+(t||0);i&&(n+=(i.offset||0)+!!i.context+!!i.suggest+(i.resolve!==!1)+(i.resolution||this.resolution)+(i.boost||0)),e=(""+e).toLowerCase(),this.cache||(this.cache=new ke);let r=this.cache.get(e+n);if(!r){let s=i&&i.cache;s&&(i.cache=!1),r=this.search(e,t,i),s&&(i.cache=s),this.cache.set(e+n,r)}return r}function ke(e){this.limit=e&&e!==!0?e:1e3,this.cache=new Map,this.h=""}ke.prototype.set=function(e,t){this.cache.set(this.h=e,t),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)},ke.prototype.get=function(e){let t=this.cache.get(e);return t&&this.h!==e&&(this.cache.delete(e),this.cache.set(this.h=e,t)),t},ke.prototype.remove=function(e){for(let t of this.cache){let i=t[0];t[1].includes(e)&&this.cache.delete(i)}},ke.prototype.clear=function(){this.cache.clear(),this.h=""};var bt={normalize:!1,numeric:!1,dedupe:!1},Se={},Ke=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),rt=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),nt=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],st={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,\u00DF:2,d:3,t:3,l:4,m:5,n:5,r:6},Je={Exact:bt,Default:Se,Normalize:Se,LatinBalance:{mapper:Ke},LatinAdvanced:{mapper:Ke,matcher:rt,replacer:nt},LatinExtra:{mapper:Ke,replacer:nt.concat([/(?!^)[aeo]/g,""]),matcher:rt},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(e){for(let i=0;i<e.length;i++){var t=e[i];let n=t.charAt(0),r=st[n];for(let s=1,l;s<t.length&&(l=t.charAt(s),l==="h"||l==="w"||!(l=st[l])||l===r||(n+=l,r=l,n.length!==4));s++);e[i]=n}}},CJK:{split:""},LatinExact:bt,LatinDefault:Se,LatinSimple:Se};function Me(e,t,i,n){let r=[];for(let s=0,l;s<e.index.length;s++)if(l=e.index[s],t>=l.length)t-=l.length;else{t=l[n?"splice":"slice"](t,i);let o=t.length;if(o&&(r=r.length?r.concat(t):t,i-=o,n&&(e.length-=o),!i))break;t=0}return r}function Be(e){if(!this||this.constructor!==Be)return new Be(e);this.index=e?[e]:[],this.length=e?e.length:0;let t=this;return new Proxy([],{get(i,n){if(n==="length")return t.length;if(n==="push")return function(r){t.index[t.index.length-1].push(r),t.length++};if(n==="pop")return function(){if(t.length)return t.length--,t.index[t.index.length-1].pop()};if(n==="indexOf")return function(r){let s=0;for(let l=0,o,h;l<t.index.length;l++){if(o=t.index[l],h=o.indexOf(r),h>=0)return s+h;s+=o.length}return-1};if(n==="includes")return function(r){for(let s=0;s<t.index.length;s++)if(t.index[s].includes(r))return!0;return!1};if(n==="slice")return function(r,s){return Me(t,r||0,s||t.length,!1)};if(n==="splice")return function(r,s){return Me(t,r||0,s||t.length,!0)};if(n==="constructor")return Array;if(typeof n!="symbol")return(i=t.index[n/2**31|0])&&i[n]},set(i,n,r){return i=n/2**31|0,(t.index[i]||(t.index[i]=[]))[n]=r,t.length++,!0}})}Be.prototype.clear=function(){this.index.length=0},Be.prototype.push=function(){};function fe(e=8){if(!this||this.constructor!==fe)return new fe(e);this.index=X(),this.h=[],this.size=0,e>32?(this.B=Ge,this.A=BigInt(e)):(this.B=De,this.A=e)}fe.prototype.get=function(e){let t=this.index[this.B(e)];return t&&t.get(e)},fe.prototype.set=function(e,t){var i=this.B(e);let n=this.index[i];n?(i=n.size,n.set(e,t),(i-=n.size)&&this.size++):(this.index[i]=n=new Map([[e,t]]),this.h.push(n),this.size++)};function ue(e=8){if(!this||this.constructor!==ue)return new ue(e);this.index=X(),this.h=[],this.size=0,e>32?(this.B=Ge,this.A=BigInt(e)):(this.B=De,this.A=e)}ue.prototype.add=function(e){var t=this.B(e);let i=this.index[t];i?(t=i.size,i.add(e),(t-=i.size)&&this.size++):(this.index[t]=i=new Set([e]),this.h.push(i),this.size++)},j=fe.prototype,j.has=ue.prototype.has=function(e){let t=this.index[this.B(e)];return t&&t.has(e)},j.delete=ue.prototype.delete=function(e){let t=this.index[this.B(e)];t&&t.delete(e)&&this.size--},j.clear=ue.prototype.clear=function(){this.index=X(),this.h=[],this.size=0},j.values=ue.prototype.values=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].values())yield t},j.keys=ue.prototype.keys=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].keys())yield t},j.entries=ue.prototype.entries=function*(){for(let e=0;e<this.h.length;e++)for(let t of this.h[e].entries())yield t};function De(e){let t=2**this.A-1;if(typeof e=="number")return e&t;let i=0,n=this.A+1;for(let r=0;r<e.length;r++)i=(i*n^e.charCodeAt(r))&t;return this.A===32?i+2**31:i}function Ge(e){let t=BigInt(2)**this.A-BigInt(1);var i=typeof e;if(i==="bigint")return e&t;if(i==="number")return BigInt(e)&t;i=BigInt(0);let n=this.A+BigInt(1);for(let r=0;r<e.length;r++)i=(i*n^BigInt(e.charCodeAt(r)))&t;return i}var ye,Pe;async function Ve(e){e=e.data;var t=e.task;let i=e.id,n=e.args;switch(t){case"init":Pe=e.options||{},(t=e.factory)?(Function("return "+t)()(self),ye=new self.FlexSearch.Index(Pe),delete self.FlexSearch):ye=new we(Pe),postMessage({id:i});break;default:let r;t==="export"&&(n[1]?(n[0]=Pe.export,n[2]=0,n[3]=1):n=null),t==="import"?n[0]&&(e=await Pe.import.call(ye,n[0]),ye.import(n[0],e)):((r=n&&ye[t].apply(ye,n))&&r.then&&(r=await r),r&&r.await&&(r=await r.await),t==="search"&&r.result&&(r=r.result)),postMessage(t==="search"?{id:i,msg:r}:{id:i})}}function Te(e){y.call(e,"add"),y.call(e,"append"),y.call(e,"search"),y.call(e,"update"),y.call(e,"remove"),y.call(e,"searchCache")}var Xe,$e,He;function m(){Xe=He=0}function y(e){this[e+"Async"]=function(){let t=arguments;var i=t[t.length-1];let n;if(typeof i=="function"&&(n=i,delete t[t.length-1]),Xe?He||(He=Date.now()-$e>=this.priority*this.priority*3):(Xe=setTimeout(m,0),$e=Date.now()),He){let s=this;return new Promise(l=>{setTimeout(function(){l(s[e+"Async"].apply(s,t))},0)})}let r=this[e].apply(this,t);return i=r.then?r:new Promise(s=>s(r)),n&&i.then(n),i}}var v=0;function M(e={},t){function i(o){function h(c){c=c.data||c;let u=c.id,f=u&&s.h[u];f&&(f(c.msg),delete s.h[u])}if(this.worker=o,this.h=X(),this.worker)return r?this.worker.on("message",h):this.worker.onmessage=h,e.config?new Promise(function(c){v>1e9&&(v=0),s.h[++v]=function(){c(s)},s.worker.postMessage({id:v,task:"init",factory:n,options:e})}):(this.priority=e.priority||4,this.encoder=t||null,this.worker.postMessage({task:"init",factory:n,options:e}),this)}if(!this||this.constructor!==M)return new M(e);let n=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;n&&(n=n.toString());let r=typeof window>"u",s=this,l=z(n,r,e.worker);return l.then?l.then(function(o){return i.call(s,o)}):i.call(this,l)}P("add"),P("append"),P("search"),P("update"),P("remove"),P("clear"),P("export"),P("import"),M.prototype.searchCache=it,Te(M.prototype);function P(e){M.prototype[e]=function(){let t=this,i=[].slice.call(arguments);var n=i[i.length-1];let r;return typeof n=="function"&&(r=n,i.pop()),n=new Promise(function(s){e==="export"&&typeof i[0]=="function"&&(i[0]=null),v>1e9&&(v=0),t.h[++v]=s,t.worker.postMessage({task:e,id:v,args:i})}),r?(n.then(r),this):n}}function z(e,t,i){return t?typeof module<"u"?new(qe()).Worker(__dirname+"/worker/node.js"):Promise.resolve().then(()=>ie(qe())).then(function(n){return new n.Worker(import.meta.dirname+"/node/node.mjs")}):e?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Ve.toString()],{type:"text/javascript"}))):new window.Worker(typeof i=="string"?i:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js"),{type:"module"})}Ie.prototype.add=function(e,t,i){if(be(e)&&(t=e,e=ze(t,this.key)),t&&(e||e===0)){if(!i&&this.reg.has(e))return this.update(e,t);for(let o=0,h;o<this.field.length;o++){h=this.B[o];var n=this.index.get(this.field[o]);if(typeof h=="function"){var r=h(t);r&&n.add(e,r,i,!0)}else r=h.G,(!r||r(t))&&(h.constructor===String?h=[""+h]:ae(h)&&(h=[h]),H(t,h,this.D,0,n,e,h[0],i))}if(this.tag)for(n=0;n<this.A.length;n++){var s=this.A[n];r=this.tag.get(this.F[n]);let o=X();if(typeof s=="function"){if(s=s(t),!s)continue}else{var l=s.G;if(l&&!l(t))continue;s.constructor===String&&(s=""+s),s=ze(t,s)}if(r&&s){ae(s)&&(s=[s]);for(let h=0,c,u;h<s.length;h++)if(c=s[h],!o[c]&&(o[c]=1,(l=r.get(c))?u=l:r.set(c,u=[]),!i||!u.includes(e))){if(u.length===2**31-1){if(l=new Be(u),this.fastupdate)for(let f of this.reg.values())f.includes(u)&&(f[f.indexOf(u)]=l);r.set(c,u=l)}u.push(e),this.fastupdate&&((l=this.reg.get(e))?l.push(u):this.reg.set(e,[u]))}}}if(this.store&&(!i||!this.store.has(e))){let o;if(this.h){o=X();for(let h=0,c;h<this.h.length;h++){if(c=this.h[h],(i=c.G)&&!i(t))continue;let u;if(typeof c=="function"){if(u=c(t),!u)continue;c=[c.O]}else if(ae(c)||c.constructor===String){o[c]=t[c];continue}L(t,o,c,0,c[0],u)}}this.store.set(e,o||t)}this.worker&&(this.fastupdate||this.reg.add(e))}return this};function L(e,t,i,n,r,s){if(e=e[r],n===i.length-1)t[r]=s||e;else if(e)if(e.constructor===Array)for(t=t[r]=Array(e.length),r=0;r<e.length;r++)L(e,t,i,n,r);else t=t[r]||(t[r]=X()),r=i[++n],L(e,t,i,n,r)}function H(e,t,i,n,r,s,l,o){if(e=e[l])if(n===t.length-1){if(e.constructor===Array){if(i[n]){for(t=0;t<e.length;t++)r.add(s,e[t],!0,!0);return}e=e.join(" ")}r.add(s,e,o,!0)}else if(e.constructor===Array)for(l=0;l<e.length;l++)H(e,t,i,n,r,s,l,o);else l=t[++n],H(e,t,i,n,r,s,l,o)}function D(e,t,i,n){if(!e.length)return e;if(e.length===1)return e=e[0],e=i||e.length>t?e.slice(i,i+t):e,n?Re.call(this,e):e;let r=[];for(let s=0,l,o;s<e.length;s++)if((l=e[s])&&(o=l.length)){if(i){if(i>=o){i-=o;continue}l=l.slice(i,i+t),o=l.length,i=0}if(o>t&&(l=l.slice(0,t),o=t),!r.length&&o>=t)return n?Re.call(this,l):l;if(r.push(l),t-=o,!t)break}return r=r.length>1?[].concat.apply([],r):r[0],n?Re.call(this,r):r}function Q(e,t,i,n){var r=n[0];if(r[0]&&r[0].query)return e[t].apply(e,r);if(!(t!=="and"&&t!=="not"||e.result.length||e.await||r.suggest))return n.length>1&&(r=n[n.length-1]),(n=r.resolve)?e.await||e.result:e;let s=[],l=0,o=0,h,c,u,f,w;for(t=0;t<n.length;t++)if(r=n[t]){var a=void 0;if(r.constructor===O)a=r.await||r.result;else if(r.then||r.constructor===Array)a=r;else{l=r.limit||0,o=r.offset||0,u=r.suggest,c=r.resolve,h=((f=r.highlight||e.highlight)||r.enrich)&&c,a=r.queue;let g=r.async||a,p=r.index,d=r.query;if(p?e.index||(e.index=p):p=e.index,d||r.tag){let x=r.field||r.pluck;if(x&&(!d||e.query&&!f||(e.query=d,e.field=x,e.highlight=f),p=p.index.get(x)),a&&(w||e.await)){w=1;let b,E=e.C.length,$=new Promise(function(R){b=R});(function(R,K){$.h=function(){K.index=null,K.resolve=!1;let q=g?R.searchAsync(K):R.search(K);return q.then?q.then(function(C){return e.C[E]=C=C.result||C,b(C),C}):(q=q.result||q,b(q),q)}})(p,Object.assign({},r)),e.C.push($),s[t]=$;continue}else r.resolve=!1,r.index=null,a=g?p.searchAsync(r):p.search(r),r.resolve=c,r.index=p}else if(r.and)a=ce(r,"and",p);else if(r.or)a=ce(r,"or",p);else if(r.not)a=ce(r,"not",p);else if(r.xor)a=ce(r,"xor",p);else continue}a.await?(w=1,a=a.await):a.then?(w=1,a=a.then(function(g){return g.result||g})):a=a.result||a,s[t]=a}if(w&&!e.await&&(e.await=new Promise(function(g){e.return=g})),w){let g=Promise.all(s).then(function(p){for(let d=0;d<e.C.length;d++)if(e.C[d]===g){e.C[d]=function(){return i.call(e,p,l,o,h,c,u,f)};break}Z(e)});e.C.push(g)}else if(e.await)e.C.push(function(){return i.call(e,s,l,o,h,c,u,f)});else return i.call(e,s,l,o,h,c,u,f);return c?e.await||e.result:e}function ce(e,t,i){e=e[t];let n=e[0]||e;return n.index||(n.index=i),i=new O(n),e.length>1&&(i=i[t].apply(i,e.slice(1))),i}O.prototype.or=function(){return Q(this,"or",_,arguments)};function _(e,t,i,n,r,s,l){return e.length&&(this.result.length&&e.push(this.result),e.length<2?this.result=e[0]:(this.result=de(e,t,i,!1,this.h),i=0)),r&&(this.await=null),r?this.resolve(t,i,n,l):this}O.prototype.and=function(){return Q(this,"and",G,arguments)};function G(e,t,i,n,r,s,l){if(!s&&!this.result.length)return r?this.result:this;let o;if(e.length)if(this.result.length&&e.unshift(this.result),e.length<2)this.result=e[0];else{let h=0;for(let c=0,u,f;c<e.length;c++)if((u=e[c])&&(f=u.length))h<f&&(h=f);else if(!s){h=0;break}h?(this.result=me(e,h,t,i,s,this.h,r),o=!0):this.result=[]}else s||(this.result=e);return r&&(this.await=null),r?this.resolve(t,i,n,l,o):this}O.prototype.xor=function(){return Q(this,"xor",B,arguments)};function B(e,t,i,n,r,s,l){if(e.length)if(this.result.length&&e.unshift(this.result),e.length<2)this.result=e[0];else{e:{s=i;var o=this.h;let h=[],c=X(),u=0;for(let f=0,w;f<e.length;f++)if(w=e[f]){u<w.length&&(u=w.length);for(let a=0,g;a<w.length;a++)if(g=w[a])for(let p=0,d;p<g.length;p++)d=g[p],c[d]=c[d]?2:1}for(let f=0,w,a=0;f<u;f++)for(let g=0,p;g<e.length;g++)if((p=e[g])&&(w=p[f])){for(let d=0,x;d<w.length;d++)if(x=w[d],c[x]===1)if(s)s--;else if(r){if(h.push(x),h.length===t){e=h;break e}}else{let b=f+(g?o:0);if(h[b]||(h[b]=[]),h[b].push(x),++a===t){e=h;break e}}}e=h}this.result=e,o=!0}else s||(this.result=e);return r&&(this.await=null),r?this.resolve(t,i,n,l,o):this}O.prototype.not=function(){return Q(this,"not",S,arguments)};function S(e,t,i,n,r,s,l){if(!s&&!this.result.length)return r?this.result:this;if(e.length&&this.result.length){e:{s=i;var o=[];e=new Set(e.flat().flat());for(let h=0,c,u=0;h<this.result.length;h++)if(c=this.result[h]){for(let f=0,w;f<c.length;f++)if(w=c[f],!e.has(w)){if(s)s--;else if(r){if(o.push(w),o.length===t){e=o;break e}}else if(o[h]||(o[h]=[]),o[h].push(w),++u===t){e=o;break e}}}e=o}this.result=e,o=!0}return r&&(this.await=null),r?this.resolve(t,i,n,l,o):this}function J(e,t,i,n,r){let s,l,o;typeof r=="string"?(s=r,r=""):s=r.template,l=s.indexOf("$1"),o=s.substring(l+2),l=s.substring(0,l);let h=r&&r.boundary,c=!r||r.clip!==!1,u=r&&r.merge&&o&&l&&new RegExp(o+" "+l,"g");r=r&&r.ellipsis;var f=0;if(typeof r=="object"){var w=r.template;f=w.length-2,r=r.pattern}typeof r!="string"&&(r=r===!1?"":"..."),f&&(r=w.replace("$1",r)),w=r.length-f;let a,g;typeof h=="object"&&(a=h.before,a===0&&(a=-1),g=h.after,g===0&&(g=-1),h=h.total||9e5),f=new Map;for(let je=0,re,gt,Ye;je<t.length;je++){let Fe;if(n)Fe=t,Ye=n;else{var p=t[je];if(Ye=p.field,!Ye)continue;Fe=p.result}gt=i.get(Ye),re=gt.encoder,p=f.get(re),typeof p!="string"&&(p=re.encode(e),f.set(re,p));for(let mt=0;mt<Fe.length;mt++){var d=Fe[mt].doc;if(!d||(d=ze(d,Ye),!d))continue;var x=d.trim().split(/\s+/);if(!x.length)continue;d="";var b=[];let wt=[];for(var E=-1,$=-1,R=0,K=0;K<x.length;K++){var q=x[K],C=re.encode(q);C=C.length>1?C.join(" "):C[0];let N;if(C&&q){for(var I=q.length,A=(re.split?q.replace(re.split,""):q).length-C.length,k="",T=0,U=0;U<p.length;U++){var W=p[U];if(W){var V=W.length;V+=A,T&&V<=T||(W=C.indexOf(W),W>-1&&(k=(W?q.substring(0,W):"")+l+q.substring(W,W+V)+o+(W+V<I?q.substring(W+V):""),T=V,N=!0))}}k&&(h&&(E<0&&(E=d.length+(d?1:0)),$=d.length+(d?1:0)+k.length,R+=I,wt.push(b.length),b.push({match:k})),d+=(d?" ":"")+k)}if(!N)q=x[K],d+=(d?" ":"")+q,h&&b.push({text:q});else if(h&&R>=h)break}if(R=wt.length*(s.length-2),a||g||h&&d.length-R>h)if(R=h+R-w*2,K=$-E,a>0&&(K+=a),g>0&&(K+=g),K<=R)x=a?E-(a>0?a:0):E-((R-K)/2|0),b=g?$+(g>0?g:0):x+R,c||(x>0&&d.charAt(x)!==" "&&d.charAt(x-1)!==" "&&(x=d.indexOf(" ",x),x<0&&(x=0)),b<d.length&&d.charAt(b-1)!==" "&&d.charAt(b)!==" "&&(b=d.lastIndexOf(" ",b),b<$?b=$:++b)),d=(x?r:"")+d.substring(x,b)+(b<d.length?r:"");else{for($=[],E={},R={},K={},q={},C={},k=A=I=0,U=T=1;;){var le=void 0;for(let N=0,Y;N<wt.length;N++){if(Y=wt[N],k)if(A!==k){if(K[N+1])continue;if(Y+=k,E[Y]){I-=w,R[N+1]=1,K[N+1]=1;continue}if(Y>=b.length-1){if(Y>=b.length){K[N+1]=1,Y>=x.length&&(R[N+1]=1);continue}I-=w}if(d=b[Y].text,V=g&&C[N])if(V>0){if(d.length>V)if(K[N+1]=1,c)d=d.substring(0,V);else continue;(V-=d.length)||(V=-1),C[N]=V}else{K[N+1]=1;continue}if(I+d.length+1<=h)d=" "+d,$[N]+=d;else if(c)le=h-I-1,le>0&&(d=" "+d.substring(0,le),$[N]+=d),K[N+1]=1;else{K[N+1]=1;continue}}else{if(K[N])continue;if(Y-=A,E[Y]){I-=w,K[N]=1,R[N]=1;continue}if(Y<=0){if(Y<0){K[N]=1,R[N]=1;continue}I-=w}if(d=b[Y].text,V=a&&q[N])if(V>0){if(d.length>V)if(K[N]=1,c)d=d.substring(d.length-V);else continue;(V-=d.length)||(V=-1),q[N]=V}else{K[N]=1;continue}if(I+d.length+1<=h)d+=" ",$[N]=d+$[N];else if(c)le=d.length+1-(h-I),le>=0&&le<d.length&&(d=d.substring(le)+" ",$[N]=d+$[N]),K[N]=1;else{K[N]=1;continue}}else{d=b[Y].match,a&&(q[N]=a),g&&(C[N]=g),N&&I++;let Vt;if(Y?!N&&w&&(I+=w):(R[N]=1,K[N]=1),Y>=x.length-1||Y<b.length-1&&b[Y+1].match?Vt=1:w&&(I+=w),I-=s.length-2,!N||I+d.length<=h)$[N]=d;else{le=T=U=R[N]=0;break}Vt&&(R[N+1]=1,K[N+1]=1)}I+=d.length,le=E[Y]=1}if(le)A===k?k++:A++;else{if(A===k?T=0:U=0,!T&&!U)break;T?(A++,k=A):k++}}d="";for(let N=0,Y;N<$.length;N++)Y=(N&&R[N]?" ":(N&&!r?" ":"")+r)+$[N],d+=Y;r&&!R[$.length]&&(d+=r)}u&&(d=d.replace(u," ")),Fe[mt].highlight=d}if(n)break}return t}function O(e,t){if(!this||this.constructor!==O)return new O(e,t);let i=0,n,r,s,l,o,h;if(e&&e.index){let c=e;if(t=c.index,i=c.boost||0,r=c.query){s=c.field||c.pluck,l=c.highlight;let u=c.resolve;e=c.async||c.queue,c.resolve=!1,c.index=null,e=e?t.searchAsync(c):t.search(c),c.resolve=u,c.index=t,e=e.result||e}else e=[]}if(e&&e.then){let c=this;e=e.then(function(u){c.C[0]=c.result=u.result||u,Z(c)}),n=[e],e=[],o=new Promise(function(u){h=u})}this.index=t||null,this.result=e||[],this.h=i,this.C=n||[],this.await=o||null,this.return=h||null,this.highlight=l||null,this.query=r||"",this.field=s||""}j=O.prototype,j.limit=function(e){if(this.await){let t=this;this.C.push(function(){return t.limit(e).result})}else if(this.result.length){let t=[];for(let i=0,n;i<this.result.length;i++)if(n=this.result[i])if(n.length<=e){if(t[i]=n,e-=n.length,!e)break}else{t[i]=n.slice(0,e);break}this.result=t}return this},j.offset=function(e){if(this.await){let t=this;this.C.push(function(){return t.offset(e).result})}else if(this.result.length){let t=[];for(let i=0,n;i<this.result.length;i++)(n=this.result[i])&&(n.length<=e?e-=n.length:(t[i]=n.slice(e),e=0));this.result=t}return this},j.boost=function(e){if(this.await){let t=this;this.C.push(function(){return t.boost(e).result})}else this.h+=e;return this};function Z(e,t){let i=e.result;var n=e.await;e.await=null;for(let r=0,s;r<e.C.length;r++)if(s=e.C[r]){if(typeof s=="function")i=s(),e.C[r]=i=i.result||i,r--;else if(s.h)i=s.h(),e.C[r]=i=i.result||i,r--;else if(s.then)return e.await=n}return n=e.return,e.C=[],e.return=null,t||n(i),i}j.resolve=function(e,t,i,n,r){let s=this.await?Z(this,!0):this.result;if(s.then){let l=this;return s.then(function(){return l.resolve(e,t,i,n,r)})}return s.length&&(typeof e=="object"?(n=e.highlight||this.highlight,i=!!n||e.enrich,t=e.offset,e=e.limit):(n=n||this.highlight,i=!!n||i),s=r?i?Re.call(this.index,s):s:D.call(this.index,s,e||100,t,i)),this.finalize(s,n)},j.finalize=function(e,t){if(e.then){let n=this;return e.then(function(r){return n.finalize(r,t)})}t&&e.length&&this.query&&(e=J(this.query,e,this.index.index,this.field,t));let i=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",i&&i(e),e};function me(e,t,i,n,r,s,l){let o=e.length,h=[],c,u;c=X();for(let f=0,w,a,g,p;f<t;f++)for(let d=0;d<o;d++)if(g=e[d],f<g.length&&(w=g[f]))for(let x=0;x<w.length;x++){if(a=w[x],(u=c[a])?c[a]++:(u=0,c[a]=1),p=h[u]||(h[u]=[]),!l){let b=f+(d||!r?0:s||0);p=p[b]||(p[b]=[])}if(p.push(a),l&&i&&u===o-1&&p.length-n===i)return n?p.slice(n):p}if(e=h.length)if(r)h=h.length>1?de(h,i,n,l,s):(h=h[0])&&i&&h.length>i||n?h.slice(n,i+n):h;else{if(e<o)return[];if(h=h[e-1],i||n)if(l)(h.length>i||n)&&(h=h.slice(n,i+n));else{r=[];for(let f=0,w;f<h.length;f++)if(w=h[f]){if(n&&w.length>n)n-=w.length;else if((i&&w.length>i||n)&&(w=w.slice(n,i+n),i-=w.length,n&&(n-=w.length)),r.push(w),!i)break}h=r}}return h}function de(e,t,i,n,r){let s=[],l=X(),o;var h=e.length;let c;if(n){for(r=h-1;r>=0;r--)if(c=(n=e[r])&&n.length){for(h=0;h<c;h++)if(o=n[h],!l[o]){if(l[o]=1,i)i--;else if(s.push(o),s.length===t)return s}}}else for(let u=h-1,f,w=0;u>=0;u--){f=e[u];for(let a=0;a<f.length;a++)if(c=(n=f[a])&&n.length){for(let g=0;g<c;g++)if(o=n[g],!l[o])if(l[o]=1,i)i--;else{let p=(a+(u<h-1&&r||0))/(u+1)|0;if((s[p]||(s[p]=[])).push(o),++w===t)return s}}}return s}function lt(e,t,i){let n=X(),r=[];for(let s=0,l;s<t.length;s++){l=t[s];for(let o=0;o<l.length;o++)n[l[o]]=1}if(i)for(let s=0,l;s<e.length;s++)l=e[s],n[l]&&(r.push(l),n[l]=0);else for(let s=0,l,o;s<e.result.length;s++)for(l=e.result[s],t=0;t<l.length;t++)o=l[t],n[o]&&((r[s]||(r[s]=[])).push(o),n[o]=0);return r}X(),Ie.prototype.search=function(e,t,i,n){i||(!t&&be(e)?(i=e,e=""):be(t)&&(i=t,t=0));let r=[];var s=[];let l,o,h,c,u,f,w=0,a=!0,g;if(i){i.constructor===Array&&(i={index:i}),e=i.query||e,l=i.pluck,o=i.merge,c=i.boost,f=l||i.field||(f=i.index)&&(f.index?null:f);var p=this.tag&&i.tag;h=i.suggest,a=i.resolve!==!1,u=i.cache,g=a&&this.store&&i.highlight;var d=!!g||a&&this.store&&i.enrich;t=i.limit||t;var x=i.offset||0;if(t||(t=a?100:0),p&&(!this.db||!n)){p.constructor!==Array&&(p=[p]);var b=[];for(let q=0,C;q<p.length;q++)if(C=p[q],C.field&&C.tag){var E=C.tag;if(E.constructor===Array)for(var $=0;$<E.length;$++)b.push(C.field,E[$]);else b.push(C.field,E)}else{E=Object.keys(C);for(let I=0,A,k;I<E.length;I++)if(A=E[I],k=C[A],k.constructor===Array)for($=0;$<k.length;$++)b.push(A,k[$]);else b.push(A,k)}if(p=b,!e){if(s=[],b.length)for(p=0;p<b.length;p+=2){if(this.db){if(n=this.index.get(b[p]),!n)continue;s.push(n=n.db.tag(b[p+1],t,x,d))}else n=Ht.call(this,b[p],b[p+1],t,x,d);r.push(a?{field:b[p],tag:b[p+1],result:n}:[n])}if(s.length){let q=this;return Promise.all(s).then(function(C){for(let I=0;I<C.length;I++)a?r[I].result=C[I]:r[I]=C[I];return a?r:new O(r.length>1?me(r,1,0,0,h,c):r[0],q)})}return a?r:new O(r.length>1?me(r,1,0,0,h,c):r[0],this)}}a||l||!(f=f||this.field)||(ae(f)?l=f:(f.constructor===Array&&f.length===1&&(f=f[0]),l=f.field||f.index)),f&&f.constructor!==Array&&(f=[f])}f||(f=this.field);let R;b=(this.worker||this.db)&&!n&&[];for(let q=0,C,I,A;q<f.length;q++){if(I=f[q],this.db&&this.tag&&!this.B[q])continue;let k;if(ae(I)||(k=I,I=k.field,e=k.query||e,t=Ce(k.limit,t),x=Ce(k.offset,x),h=Ce(k.suggest,h),g=a&&this.store&&Ce(k.highlight,g),d=!!g||a&&this.store&&Ce(k.enrich,d),u=Ce(k.cache,u)),n)C=n[q];else{E=k||i||{},$=E.enrich;var K=this.index.get(I);if(p&&(this.db&&(E.tag=p,R=K.db.support_tag_search,E.field=f),!R&&$&&(E.enrich=!1)),C=u?K.searchCache(e,t,E):K.search(e,t,E),$&&(E.enrich=$),b){b[q]=C;continue}}if(A=(C=C.result||C)&&C.length,p&&A){if(E=[],$=0,this.db&&n){if(!R)for(K=f.length;K<n.length;K++){let T=n[K];if(T&&T.length)$++,E.push(T);else if(!h)return a?r:new O(r,this)}}else for(let T=0,U,W;T<p.length;T+=2){if(U=this.tag.get(p[T]),!U){if(h)continue;return a?r:new O(r,this)}if(W=(U=U&&U.get(p[T+1]))&&U.length)$++,E.push(U);else if(!h)return a?r:new O(r,this)}if($){if(C=lt(C,E,a),A=C.length,!A&&!h)return a?C:new O(C,this);$--}}if(A)s[w]=I,r.push(C),w++;else if(f.length===1)return a?r:new O(r,this)}if(b){if(this.db&&p&&p.length&&!R)for(d=0;d<p.length;d+=2){if(s=this.index.get(p[d]),!s){if(h)continue;return a?r:new O(r,this)}b.push(s.db.tag(p[d+1],t,x,!1))}let q=this;return Promise.all(b).then(function(C){return i&&(i.resolve=a),C.length&&(C=q.search(e,t,i,C)),C})}if(!w)return a?r:new O(r,this);if(l&&(!d||!this.store))return r=r[0],a?r:new O(r,this);for(b=[],x=0;x<s.length;x++){if(p=r[x],d&&p.length&&typeof p[0].doc>"u"&&(this.db?b.push(p=this.index.get(this.field[0]).db.enrich(p)):p=Re.call(this,p)),l)return a?g?J(e,p,this.index,l,g):p:new O(p,this);r[x]={field:s[x],result:p}}if(d&&this.db&&b.length){let q=this;return Promise.all(b).then(function(C){for(let I=0;I<C.length;I++)r[I].result=C[I];return g&&(r=J(e,r,q.index,l,g)),o?Ot(r):r})}return g&&(r=J(e,r,this.index,l,g)),o?Ot(r):r};function Ot(e){let t=[],i=X(),n=X();for(let r=0,s,l,o,h,c,u,f;r<e.length;r++){s=e[r],l=s.field,o=s.result;for(let w=0;w<o.length;w++)c=o[w],typeof c!="object"?c={id:h=c}:h=c.id,(u=i[h])?u.push(l):(c.field=i[h]=[l],t.push(c)),(f=c.highlight)&&(u=n[h],u||(n[h]=u={},c.highlight=u),u[l]=f)}return t}function Ht(e,t,i,n,r){return e=this.tag.get(e),e?(e=e.get(t),e?(t=e.length-n,t>0&&((i&&t>i||n)&&(e=e.slice(n,n+i)),r&&(e=Re.call(this,e))),e):[]):[]}function Re(e){if(!this||!this.store)return e;if(this.db)return this.index.get(this.field[0]).db.enrich(e);let t=Array(e.length);for(let i=0,n;i<e.length;i++)n=e[i],t[i]={id:n,doc:this.store.get(n)};return t}function Ie(e){if(!this||this.constructor!==Ie)return new Ie(e);let t=e.document||e.doc||e,i,n;if(this.B=[],this.field=[],this.D=[],this.key=(i=t.key||t.id)&&ot(i,this.D)||"id",(n=e.keystore||0)&&(this.keystore=n),this.fastupdate=!!e.fastupdate,this.reg=!this.fastupdate||e.worker||e.db?n?new ue(n):new Set:n?new fe(n):new Map,this.h=(i=t.store||null)&&i&&i!==!0&&[],this.store=i?n?new fe(n):new Map:null,this.cache=(i=e.cache||null)&&new ke(i),e.cache=!1,this.worker=e.worker||!1,this.priority=e.priority||4,this.index=Rt.call(this,e,t),this.tag=null,(i=t.tag)&&(typeof i=="string"&&(i=[i]),i.length)){this.tag=new Map,this.A=[],this.F=[];for(let r=0,s,l;r<i.length;r++){if(s=i[r],l=s.field||s,!l)throw Error("The tag field from the document descriptor is undefined.");s.custom?this.A[r]=s.custom:(this.A[r]=ot(l,this.D),s.filter&&(typeof this.A[r]=="string"&&(this.A[r]=new String(this.A[r])),this.A[r].G=s.filter)),this.F[r]=l,this.tag.set(l,new Map)}}if(this.worker){this.fastupdate=!1,e=[];for(let r of this.index.values())r.then&&e.push(r);if(e.length){let r=this;return Promise.all(e).then(function(s){let l=0;for(let o of r.index.entries()){let h=o[0],c=o[1];c.then&&(c=s[l],r.index.set(h,c),l++)}return r})}}else e.db&&(this.fastupdate=!1,this.mount(e.db))}j=Ie.prototype,j.mount=function(e){let t=this.field;if(this.tag)for(let s=0,l;s<this.F.length;s++){l=this.F[s];var i=void 0;this.index.set(l,i=new we({},this.reg)),t===this.field&&(t=t.slice(0)),t.push(l),i.tag=this.tag.get(l)}i=[];let n={db:e.db,type:e.type,fastupdate:e.fastupdate};for(let s=0,l,o;s<t.length;s++){n.field=o=t[s],l=this.index.get(o);let h=new e.constructor(e.id,n);h.id=e.id,i[s]=h.mount(l),l.document=!0,s?l.bypass=!0:l.store=this.store}let r=this;return this.db=Promise.all(i).then(function(){r.db=!0})},j.commit=async function(){let e=[];for(let t of this.index.values())e.push(t.commit());await Promise.all(e),this.reg.clear()},j.destroy=function(){let e=[];for(let t of this.index.values())e.push(t.destroy());return Promise.all(e)};function Rt(e,t){let i=new Map,n=t.index||t.field||t;ae(n)&&(n=[n]);for(let s=0,l,o;s<n.length;s++){if(l=n[s],ae(l)||(o=l,l=l.field),o=be(o)?Object.assign({},e,o):e,this.worker){var r=void 0;r=(r=o.encoder)&&r.encode?r:new ve(typeof r=="string"?Je[r]:r||{}),r=new M(o,r),i.set(l,r)}this.worker||i.set(l,new we(o,this.reg)),o.custom?this.B[s]=o.custom:(this.B[s]=ot(l,this.D),o.filter&&(typeof this.B[s]=="string"&&(this.B[s]=new String(this.B[s])),this.B[s].G=o.filter)),this.field[s]=l}if(this.h){e=t.store,ae(e)&&(e=[e]);for(let s=0,l,o;s<e.length;s++)l=e[s],o=l.field||l,l.custom?(this.h[s]=l.custom,l.custom.O=o):(this.h[s]=ot(o,this.D),l.filter&&(typeof this.h[s]=="string"&&(this.h[s]=new String(this.h[s])),this.h[s].G=l.filter))}return i}function ot(e,t){let i=e.split(":"),n=0;for(let r=0;r<i.length;r++)e=i[r],e[e.length-1]==="]"&&(e=e.substring(0,e.length-2))&&(t[n]=!0),e&&(i[n++]=e);return n<i.length&&(i.length=n),n>1?i:i[0]}j.append=function(e,t){return this.add(e,t,!0)},j.update=function(e,t){return this.remove(e).add(e,t)},j.remove=function(e){be(e)&&(e=ze(e,this.key));for(var t of this.index.values())t.remove(e,!0);if(this.reg.has(e)){if(this.tag&&!this.fastupdate)for(let i of this.tag.values())for(let n of i){t=n[0];let r=n[1],s=r.indexOf(e);s>-1&&(r.length>1?r.splice(s,1):i.delete(t))}this.store&&this.store.delete(e),this.reg.delete(e)}return this.cache&&this.cache.remove(e),this},j.clear=function(){let e=[];for(let t of this.index.values()){let i=t.clear();i.then&&e.push(i)}if(this.tag)for(let t of this.tag.values())t.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),e.length?Promise.all(e):this},j.contain=function(e){return this.db?this.index.get(this.field[0]).db.has(e):this.reg.has(e)},j.cleanup=function(){for(let e of this.index.values())e.cleanup();return this},j.get=function(e){return this.db?this.index.get(this.field[0]).db.enrich(e).then(function(t){return t[0]&&t[0].doc||null}):this.store.get(e)||null},j.set=function(e,t){return typeof e=="object"&&(t=e,e=ze(t,this.key)),this.store.set(e,t),this},j.searchCache=it,j.export=Wt,j.import=Ut,Te(Ie.prototype);function vt(e,t=0){let i=[],n=[];t&&(t=25e4/t*5e3|0);for(let r of e.entries())n.push(r),n.length===t&&(i.push(n),n=[]);return n.length&&i.push(n),i}function xt(e,t){t||(t=new Map);for(let i=0,n;i<e.length;i++)n=e[i],t.set(n[0],n[1]);return t}function Ct(e,t=0){let i=[],n=[];t&&(t=25e4/t*1e3|0);for(let r of e.entries())n.push([r[0],vt(r[1])[0]]),n.length===t&&(i.push(n),n=[]);return n.length&&i.push(n),i}function Lt(e,t){t||(t=new Map);for(let i=0,n,r;i<e.length;i++)n=e[i],r=t.get(n[0]),t.set(n[0],xt(n[1],r));return t}function Mt(e){let t=[],i=[];for(let n of e.keys())i.push(n),i.length===25e4&&(t.push(i),i=[]);return i.length&&t.push(i),t}function Bt(e,t){t||(t=new Set);for(let i=0;i<e.length;i++)t.add(e[i]);return t}function ht(e,t,i,n,r,s,l=0){let o=n&&n.constructor===Array;var h=o?n.shift():n;if(!h)return this.export(e,t,r,s+1);if((h=e((t?t+".":"")+(l+1)+"."+i,JSON.stringify(h)))&&h.then){let c=this;return h.then(function(){return ht.call(c,e,t,i,o?n:null,r,s,l+1)})}return ht.call(this,e,t,i,o?n:null,r,s,l+1)}function Wt(e,t,i=0,n=0){if(i<this.field.length){let l=this.field[i];if((t=this.index.get(l).export(e,l,i,n=1))&&t.then){let o=this;return t.then(function(){return o.export(e,l,i+1)})}return this.export(e,l,i+1)}let r,s;switch(n){case 0:r="reg",s=Mt(this.reg),t=null;break;case 1:r="tag",s=this.tag&&Ct(this.tag,this.reg.size),t=null;break;case 2:r="doc",s=this.store&&vt(this.store),t=null;break;default:return}return ht.call(this,e,t,r,s||null,i,n)}function Ut(e,t){var i=e.split(".");i[i.length-1]==="json"&&i.pop();let n=i.length>2?i[0]:"";if(i=i.length>2?i[2]:i[1],this.worker&&n)return this.index.get(n).import(e);if(t){if(typeof t=="string"&&(t=JSON.parse(t)),n)return this.index.get(n).import(i,t);switch(i){case"reg":this.fastupdate=!1,this.reg=Bt(t,this.reg);for(let r=0,s;r<this.field.length;r++)s=this.index.get(this.field[r]),s.fastupdate=!1,s.reg=this.reg;if(this.worker){t=[];for(let r of this.index.values())t.push(r.import(e));return Promise.all(t)}break;case"tag":this.tag=Lt(t,this.tag);break;case"doc":this.store=xt(t,this.store)}}}function Et(e,t){let i="";for(let n of e.entries()){e=n[0];let r=n[1],s="";for(let l=0,o;l<r.length;l++){o=r[l]||[""];let h="";for(let c=0;c<o.length;c++)h+=(h?",":"")+(t==="string"?'"'+o[c]+'"':o[c]);h="["+h+"]",s+=(s?",":"")+h}s='["'+e+'",['+s+"]]",i+=(i?",":"")+s}return i}we.prototype.remove=function(e,t){let i=this.reg.size&&(this.fastupdate?this.reg.get(e):this.reg.has(e));if(i){if(this.fastupdate){for(let n=0,r,s;n<i.length;n++)if((r=i[n])&&(s=r.length))if(r[s-1]===e)r.pop();else{let l=r.indexOf(e);l>=0&&r.splice(l,1)}}else Ze(this.map,e),this.depth&&Ze(this.ctx,e);t||this.reg.delete(e)}return this.db&&(this.commit_task.push({del:e}),this.M&&Pt(this)),this.cache&&this.cache.remove(e),this};function Ze(e,t){let i=0;var n=typeof t>"u";if(e.constructor===Array){for(let r=0,s,l,o;r<e.length;r++)if((s=e[r])&&s.length){if(n)return 1;if(l=s.indexOf(t),l>=0){if(s.length>1)return s.splice(l,1),1;if(delete e[r],i)return 1;o=1}else{if(o)return 1;i++}}}else for(let r of e.entries())n=r[0],Ze(r[1],t)?i++:e.delete(n);return i}var Jt={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};we.prototype.add=function(e,t,i,n){if(t&&(e||e===0)){if(!n&&!i&&this.reg.has(e))return this.update(e,t);n=this.depth,t=this.encoder.encode(t,!n);let c=t.length;if(c){let u=X(),f=X(),w=this.resolution;for(let a=0;a<c;a++){let g=t[this.rtl?c-1-a:a];var r=g.length;if(r&&(n||!f[g])){var s=this.score?this.score(t,g,a,null,0):at(w,c,a),l="";switch(this.tokenize){case"tolerant":if(Ae(this,f,g,s,e,i),r>2){for(let p=1,d,x,b,E;p<r-1;p++)d=g.charAt(p),x=g.charAt(p+1),b=g.substring(0,p)+x,E=g.substring(p+2),l=b+d+E,Ae(this,f,l,s,e,i),l=b+E,Ae(this,f,l,s,e,i);Ae(this,f,g.substring(0,g.length-1),s,e,i)}break;case"full":if(r>2){for(let p=0,d;p<r;p++)for(s=r;s>p;s--){l=g.substring(p,s),d=this.rtl?r-1-p:p;var o=this.score?this.score(t,g,a,l,d):at(w,c,a,r,d);Ae(this,f,l,o,e,i)}break}case"bidirectional":case"reverse":if(r>1){for(o=r-1;o>0;o--){l=g[this.rtl?r-1-o:o]+l;var h=this.score?this.score(t,g,a,l,o):at(w,c,a,r,o);Ae(this,f,l,h,e,i)}l=""}case"forward":if(r>1){for(o=0;o<r;o++)l+=g[this.rtl?r-1-o:o],Ae(this,f,l,s,e,i);break}default:if(Ae(this,f,g,s,e,i),n&&c>1&&a<c-1)for(r=this.N,l=g,s=Math.min(n+1,this.rtl?a+1:c-a),o=1;o<s;o++){g=t[this.rtl?c-1-a-o:a+o],h=this.bidirectional&&g>l;let p=this.score?this.score(t,l,a,g,o-1):at(r+(c/2>r?0:1),c,a,s-1,o-1);Ae(this,u,h?l:g,p,e,i,h?g:l)}}}}this.fastupdate||this.reg.add(e)}}return this.db&&(this.commit_task.push(i?{ins:e}:{del:e}),this.M&&Pt(this)),this};function Ae(e,t,i,n,r,s,l){let o,h;if(!(o=t[i])||l&&!o[l]){if(l?(t=o||(t[i]=X()),t[l]=1,h=e.ctx,(o=h.get(l))?h=o:h.set(l,h=e.keystore?new fe(e.keystore):new Map)):(h=e.map,t[i]=1),(o=h.get(i))?h=o:h.set(i,h=o=[]),s){for(let c=0,u;c<o.length;c++)if((u=o[c])&&u.includes(r)){if(c<=n)return;u.splice(u.indexOf(r),1),e.fastupdate&&(t=e.reg.get(r))&&t.splice(t.indexOf(u),1);break}}if(h=h[n]||(h[n]=[]),h.push(r),h.length===2**31-1){if(t=new Be(h),e.fastupdate)for(let c of e.reg.values())c.includes(h)&&(c[c.indexOf(h)]=t);o[n]=h=t}e.fastupdate&&((n=e.reg.get(r))?n.push(h):e.reg.set(r,[h]))}}function at(e,t,i,n,r){return i&&e>1?t+(n||0)<=e?i+(r||0):(e-1)/(t+(n||0))*(i+(r||0))+1|0:0}we.prototype.search=function(e,t,i){if(i||(t||typeof e!="object"?typeof t=="object"&&(i=t,t=0):(i=e,e="")),i&&i.cache)return i.cache=!1,e=this.searchCache(e,t,i),i.cache=!0,e;let n=[],r,s,l,o=0,h,c,u,f,w;i&&(e=i.query||e,t=i.limit||t,o=i.offset||0,s=i.context,l=i.suggest,w=(h=i.resolve)&&i.enrich,u=i.boost,f=i.resolution,c=this.db&&i.tag),typeof h>"u"&&(h=this.resolve),s=this.depth&&s!==!1;let a=this.encoder.encode(e,!s);if(r=a.length,t=t||(h?100:0),r===1)return zt.call(this,a[0],"",t,o,h,w,c);if(r===2&&s&&!l)return zt.call(this,a[1],a[0],t,o,h,w,c);let g=X(),p=0,d;if(s&&(d=a[0],p=1),f||f===0||(f=d?this.N:this.resolution),this.db){if(this.db.search&&(i=this.db.search(this,a,t,o,l,h,w,c),i!==!1))return i;let x=this;return(async function(){for(let b,E;p<r;p++){if((E=a[p])&&!g[E]){if(g[E]=1,b=await kt(x,E,d,0,0,!1,!1),b=St(b,n,l,f)){n=b;break}d&&(l&&b&&n.length||(d=E))}l&&d&&p===r-1&&!n.length&&(f=x.resolution,d="",p=-1,g=X())}return Nt(n,f,t,o,l,u,h)})()}for(let x,b;p<r;p++){if((b=a[p])&&!g[b]){if(g[b]=1,x=kt(this,b,d,0,0,!1,!1),x=St(x,n,l,f)){n=x;break}d&&(l&&x&&n.length||(d=b))}l&&d&&p===r-1&&!n.length&&(f=this.resolution,d="",p=-1,g=X())}return Nt(n,f,t,o,l,u,h)};function Nt(e,t,i,n,r,s,l){let o=e.length,h=e;if(o>1)h=me(e,t,i,n,r,s,l);else if(o===1)return l?D.call(null,e[0],i,n):new O(e[0],this);return l?h:new O(h,this)}function zt(e,t,i,n,r,s,l){return e=kt(this,e,t,i,n,r,s,l),this.db?e.then(function(o){return r?o||[]:new O(o,this)}):e&&e.length?r?D.call(this,e,i,n):new O(e,this):r?[]:new O([],this)}function St(e,t,i,n){let r=[];if(e&&e.length){if(e.length<=n){t.push(e);return}for(let s=0,l;s<n;s++)(l=e[s])&&(r[s]=l);if(r.length){t.push(r);return}}if(!i)return r}function kt(e,t,i,n,r,s,l,o){let h;return i&&(h=e.bidirectional&&t>i)&&(h=i,i=t,t=h),e.db?e.db.get(t,i,n,r,s,l,o):(e=i?(e=e.ctx.get(i))&&e.get(t):e.map.get(t),e)}function we(e,t){if(!this||this.constructor!==we)return new we(e);if(e){var i=ae(e)?e:e.preset;i&&(e=Object.assign({},Jt[i],e))}else e={};i=e.context;let n=i===!0?{depth:1}:i||{},r=ae(e.encoder)?Je[e.encoder]:e.encode||e.encoder||{};this.encoder=r.encode?r:typeof r=="object"?new ve(r):{encode:r},this.resolution=e.resolution||9,this.tokenize=i=(i=e.tokenize)&&i!=="default"&&i!=="exact"&&i||"strict",this.depth=i==="strict"&&n.depth||0,this.bidirectional=n.bidirectional!==!1,this.fastupdate=!!e.fastupdate,this.score=e.score||null,(i=e.keystore||0)&&(this.keystore=i),this.map=i?new fe(i):new Map,this.ctx=i?new fe(i):new Map,this.reg=t||(this.fastupdate?i?new fe(i):new Map:i?new ue(i):new Set),this.N=n.resolution||3,this.rtl=r.rtl||e.rtl||!1,this.cache=(i=e.cache||null)&&new ke(i),this.resolve=e.resolve!==!1,(i=e.db)&&(this.db=this.mount(i)),this.M=e.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=e.priority||4}j=we.prototype,j.mount=function(e){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),e.mount(this)},j.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)},j.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function Pt(e){e.commit_timer||(e.commit_timer=setTimeout(function(){e.commit_timer=null,e.db.commit(e)},1))}j.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this},j.append=function(e,t){return this.add(e,t,!0)},j.contain=function(e){return this.db?this.db.has(e):this.reg.has(e)},j.update=function(e,t){let i=this,n=this.remove(e);return n&&n.then?n.then(()=>i.add(e,t)):this.add(e,t)},j.cleanup=function(){return this.fastupdate?(Ze(this.map),this.depth&&Ze(this.ctx),this):this},j.searchCache=it,j.export=function(e,t,i=0,n=0){let r,s;switch(n){case 0:r="reg",s=Mt(this.reg);break;case 1:r="cfg",s=null;break;case 2:r="map",s=vt(this.map,this.reg.size);break;case 3:r="ctx",s=Ct(this.ctx,this.reg.size);break;default:return}return ht.call(this,e,t,r,s,i,n)},j.import=function(e,t){if(t)switch(typeof t=="string"&&(t=JSON.parse(t)),e=e.split("."),e[e.length-1]==="json"&&e.pop(),e.length===3&&e.shift(),e=e.length>1?e[1]:e[0],e){case"reg":this.fastupdate=!1,this.reg=Bt(t,this.reg);break;case"map":this.map=xt(t,this.map);break;case"ctx":this.ctx=Lt(t,this.ctx)}},j.serialize=function(e=!0){let t="",i="",n="";if(this.reg.size){let s;for(var r of this.reg.keys())s||(s=typeof r),t+=(t?",":"")+(s==="string"?'"'+r+'"':r);t="index.reg=new Set(["+t+"]);",i=Et(this.map,s),i="index.map=new Map(["+i+"]);";for(let l of this.ctx.entries()){r=l[0];let o=Et(l[1],s);o="new Map(["+o+"])",o='["'+r+'",'+o+"]",n+=(n?",":"")+o}n="index.ctx=new Map(["+n+"]);"}return e?"function inject(index){"+t+i+n+"}":t+i+n},Te(we.prototype);var Tt=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),ct=["map","ctx","tag","reg","cfg"],_e=X();function ft(e,t={}){if(!this||this.constructor!==ft)return new ft(e,t);typeof e=="object"&&(t=e,e=e.name),e||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(e?":"+e.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=t.field?t.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=t.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}j=ft.prototype,j.mount=function(e){return e.index?e.mount(this):(e.db=this,this.open())},j.open=function(){if(this.db)return this.db;let e=this;navigator.storage&&navigator.storage.persist(),_e[e.id]||(_e[e.id]=[]),_e[e.id].push(e.field);let t=Tt.open(e.id,1);return t.onupgradeneeded=function(){let i=e.db=this.result;for(let n=0,r;n<ct.length;n++){r=ct[n];for(let s=0,l;s<_e[e.id].length;s++)l=_e[e.id][s],i.objectStoreNames.contains(r+(r!=="reg"&&l?":"+l:""))||i.createObjectStore(r+(r!=="reg"&&l?":"+l:""))}},e.db=Ee(t,function(i){e.db=i,e.db.onversionchange=function(){e.close()}})},j.close=function(){this.db&&this.db.close(),this.db=null},j.destroy=function(){let e=Tt.deleteDatabase(this.id);return Ee(e)},j.clear=function(){let e=[];for(let i=0,n;i<ct.length;i++){n=ct[i];for(let r=0,s;r<_e[this.id].length;r++)s=_e[this.id][r],e.push(n+(n!=="reg"&&s?":"+s:""))}let t=this.db.transaction(e,"readwrite");for(let i=0;i<e.length;i++)t.objectStore(e[i]).clear();return Ee(t)},j.get=function(e,t,i=0,n=0,r=!0,s=!1){e=this.db.transaction((t?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((t?"ctx":"map")+(this.field?":"+this.field:"")).get(t?t+":"+e:e);let l=this;return Ee(e).then(function(o){let h=[];if(!o||!o.length)return h;if(r){if(!i&&!n&&o.length===1)return o[0];for(let c=0,u;c<o.length;c++)if((u=o[c])&&u.length){if(n>=u.length){n-=u.length;continue}let f=i?n+Math.min(u.length-n,i):u.length;for(let w=n;w<f;w++)h.push(u[w]);if(n=0,h.length===i)break}return s?l.enrich(h):h}return o})},j.tag=function(e,t=0,i=0,n=!1){e=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(e);let r=this;return Ee(e).then(function(s){return!s||!s.length||i>=s.length?[]:!t&&!i?s:(s=s.slice(i,i+t),n?r.enrich(s):s)})},j.enrich=function(e){typeof e!="object"&&(e=[e]);let t=this.db.transaction("reg","readonly").objectStore("reg"),i=[];for(let n=0;n<e.length;n++)i[n]=Ee(t.get(e[n]));return Promise.all(i).then(function(n){for(let r=0;r<n.length;r++)n[r]={id:e[r],doc:n[r]?JSON.parse(n[r]):null};return n})},j.has=function(e){return e=this.db.transaction("reg","readonly").objectStore("reg").getKey(e),Ee(e).then(function(t){return!!t})},j.search=null,j.info=function(){},j.transaction=function(e,t,i){e+=e!=="reg"&&this.field?":"+this.field:"";let n=this.h[e+":"+t];if(n)return i.call(this,n);let r=this.db.transaction(e,t);this.h[e+":"+t]=n=r.objectStore(e);let s=i.call(this,n);return this.h[e+":"+t]=null,Ee(r).finally(function(){return r=n=null,s})},j.commit=async function(e){let t=e.commit_task,i=[];e.commit_task=[];for(let n=0,r;n<t.length;n++)r=t[n],r.del&&i.push(r.del);i.length&&await this.remove(i),e.reg.size&&(await this.transaction("map","readwrite",function(n){for(let r of e.map){let s=r[0],l=r[1];l.length&&(n.get(s).onsuccess=function(){let o=this.result;var h;if(o&&o.length){let c=Math.max(o.length,l.length);for(let u=0,f,w;u<c;u++)if((w=l[u])&&w.length){if((f=o[u])&&f.length)for(h=0;h<w.length;h++)f.push(w[h]);else o[u]=w;h=1}}else o=l,h=1;h&&n.put(o,s)})}}),await this.transaction("ctx","readwrite",function(n){for(let r of e.ctx){let s=r[0],l=r[1];for(let o of l){let h=o[0],c=o[1];c.length&&(n.get(s+":"+h).onsuccess=function(){let u=this.result;var f;if(u&&u.length){let w=Math.max(u.length,c.length);for(let a=0,g,p;a<w;a++)if((p=c[a])&&p.length){if((g=u[a])&&g.length)for(f=0;f<p.length;f++)g.push(p[f]);else u[a]=p;f=1}}else u=c,f=1;f&&n.put(u,s+":"+h)})}}}),e.store?await this.transaction("reg","readwrite",function(n){for(let r of e.store){let s=r[0],l=r[1];n.put(typeof l=="object"?JSON.stringify(l):1,s)}}):e.bypass||await this.transaction("reg","readwrite",function(n){for(let r of e.reg.keys())n.put(1,r)}),e.tag&&await this.transaction("tag","readwrite",function(n){for(let r of e.tag){let s=r[0],l=r[1];l.length&&(n.get(s).onsuccess=function(){let o=this.result;o=o&&o.length?o.concat(l):l,n.put(o,s)})}}),e.map.clear(),e.ctx.clear(),e.tag&&e.tag.clear(),e.store&&e.store.clear(),e.document||e.reg.clear())};function At(e,t,i){let n=e.value,r,s=0;for(let l=0,o;l<n.length;l++){if(o=i?n:n[l]){for(let h=0,c,u;h<t.length;h++)if(u=t[h],c=o.indexOf(u),c>=0)if(r=1,o.length>1)o.splice(c,1);else{n[l]=[];break}s+=o.length}if(i)break}s?r&&e.update(n):e.delete(),e.continue()}j.remove=function(e){return typeof e!="object"&&(e=[e]),Promise.all([this.transaction("map","readwrite",function(t){t.openCursor().onsuccess=function(){let i=this.result;i&&At(i,e)}}),this.transaction("ctx","readwrite",function(t){t.openCursor().onsuccess=function(){let i=this.result;i&&At(i,e)}}),this.transaction("tag","readwrite",function(t){t.openCursor().onsuccess=function(){let i=this.result;i&&At(i,e,!0)}}),this.transaction("reg","readwrite",function(t){for(let i=0;i<e.length;i++)t.delete(e[i])})])};function Ee(e,t){return new Promise((i,n)=>{e.onsuccess=e.oncomplete=function(){t&&t(this.result),t=null,i(this.result)},e.onerror=e.onblocked=n,e=null})}var Dt={Index:we,Charset:Je,Encoder:ve,Document:Ie,Worker:M,Resolver:O,IndexedDB:ft,Language:{}};function Gt(e,t){if(!e)return;function i(r){r.target===this&&(r.preventDefault(),r.stopPropagation(),t())}function n(r){r.key.startsWith("Esc")&&(r.preventDefault(),t())}e?.addEventListener("click",i),window.addCleanup(()=>e?.removeEventListener("click",i)),document.addEventListener("keydown",n),window.addCleanup(()=>document.removeEventListener("keydown",n))}function ut(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var ai=Object.hasOwnProperty,Xt=ie(We(),1),ci=(0,Xt.default)();function Zt(e){let t=It(ii(e,"index"),!0);return t.length===0?"/":t}var $t=(e,t,i)=>{let n=new URL(e.getAttribute(t),i);e.setAttribute(t,n.pathname+n.hash)};function Qt(e,t){e.querySelectorAll('[href=""], [href^="./"], [href^="../"]').forEach(i=>$t(i,"href",t)),e.querySelectorAll('[src=""], [src^="./"], [src^="../"]').forEach(i=>$t(i,"src",t))}function Yt(e){let t=e.split("/").filter(i=>i!=="").slice(0,-1).map(i=>"..").join("/");return t.length===0&&(t="."),t}function Ft(e,t){return ei(Yt(e),Zt(t))}function ei(...e){if(e.length===0)return"";let t=e.filter(i=>i!==""&&i!=="/").map(i=>It(i)).join("/");return e[0].startsWith("/")&&(t="/"+t),e[e.length-1].endsWith("/")&&(t=t+"/"),t}function ti(e,t){return e===t||e.endsWith("/"+t)}function ii(e,t){return ti(e,t)&&(e=e.slice(0,-t.length)),e}function It(e,t){return e.startsWith("/")&&(e=e.substring(1)),!t&&e.endsWith("/")&&(e=e.slice(0,-1)),e}var Ne="basic",pe="",ri=e=>e.toLowerCase().split(/\s+/).filter(t=>t.length>0),Qe=new Dt.Document({encode:ri,document:{id:"id",tag:"tags",index:[{field:"title",tokenize:"forward"},{field:"content",tokenize:"forward"},{field:"tags",tokenize:"forward"}]}}),ni=new DOMParser,jt=new Map,dt=30,pt=8,si=5,_t=e=>{let t=e.split(/\s+/).filter(n=>n.trim()!==""),i=t.length;if(i>1)for(let n=1;n<i;n++)t.push(t.slice(0,n+1).join(" "));return t.sort((n,r)=>r.length-n.length)};function qt(e,t,i){let n=_t(e),r=t.split(/\s+/).filter(h=>h!==""),s=0,l=r.length-1;if(i){let h=w=>n.some(a=>w.toLowerCase().startsWith(a.toLowerCase())),c=r.map(h),u=0,f=0;for(let w=0;w<Math.max(r.length-dt,0);w++){let a=c.slice(w,w+dt).reduce((g,p)=>g+(p?1:0),0);a>=u&&(u=a,f=w)}s=Math.max(f-dt,0),l=Math.min(s+2*dt,r.length-1),r=r.slice(s,l)}let o=r.map(h=>{for(let c of n)if(h.toLowerCase().includes(c.toLowerCase())){let u=new RegExp(c.toLowerCase(),"gi");return h.replace(u,'<span class="highlight">$&</span>')}return h}).join(" ");return`${s===0?"":"..."}${o}${l===r.length-1?"":"..."}`}function li(e,t){let i=new DOMParser,n=_t(e),r=i.parseFromString(t.innerHTML,"text/html"),s=o=>{let h=document.createElement("span");return h.className="highlight",h.textContent=o,h},l=(o,h)=>{if(o.nodeType===Node.TEXT_NODE){let c=o.nodeValue??"",u=new RegExp(h.toLowerCase(),"gi"),f=c.match(u);if(!f||f.length===0)return;let w=document.createElement("span"),a=0;for(let g of f){let p=c.indexOf(g,a);w.appendChild(document.createTextNode(c.slice(a,p))),w.appendChild(s(g)),a=p+g.length}w.appendChild(document.createTextNode(c.slice(a))),o.parentNode?.replaceChild(w,o)}else if(o.nodeType===Node.ELEMENT_NODE){if(o.classList.contains("highlight"))return;Array.from(o.childNodes).forEach(c=>l(c,h))}};for(let o of n)l(r.body,o);return r.body}async function oi(e,t,i){let n=e.querySelector(".search-container");if(!n)return;let r=n.closest(".sidebar"),s=e.querySelector(".search-button");if(!s)return;let l=e.querySelector(".search-bar");if(!l)return;let o=e.querySelector(".search-layout");if(!o)return;let h=Object.keys(i),c=A=>{o.appendChild(A)},u=o.dataset.preview==="true",f,w,a=document.createElement("div");a.className="results-container",c(a),u&&(f=document.createElement("div"),f.className="preview-container",c(f));function g(){n.classList.remove("active"),l.value="",r&&(r.style.zIndex=""),ut(a),f&&ut(f),o.classList.remove("display-results"),Ne="basic",s.focus()}function p(A){Ne=A,r&&(r.style.zIndex="1"),n.classList.add("active"),l.focus()}let d=null;async function x(A){if(A.key==="k"&&(A.ctrlKey||A.metaKey)&&!A.shiftKey){A.preventDefault(),n.classList.contains("active")?g():p("basic");return}else if(A.shiftKey&&(A.ctrlKey||A.metaKey)&&A.key.toLowerCase()==="k"){A.preventDefault(),n.classList.contains("active")?g():p("tags"),l.value="#";return}if(d&&d.classList.remove("focus"),!!n.classList.contains("active")){if(A.key==="Enter"&&!A.isComposing)if(a.contains(document.activeElement)){let k=document.activeElement;if(k.classList.contains("no-match"))return;await C(k),k.click()}else{let k=document.getElementsByClassName("result-card")[0];if(!k||k.classList.contains("no-match"))return;await C(k),k.click()}else if(A.key==="ArrowUp"||A.shiftKey&&A.key==="Tab"){if(A.preventDefault(),a.contains(document.activeElement)){let k=d||document.activeElement,T=k?.previousElementSibling;k?.classList.remove("focus"),T?.focus(),T&&(d=T),await C(T)}}else if((A.key==="ArrowDown"||A.key==="Tab")&&(A.preventDefault(),document.activeElement===l||d!==null)){let k=d||document.getElementsByClassName("result-card")[0],T=k?.nextElementSibling;k?.classList.remove("focus"),T?.focus(),T&&(d=T),await C(T)}}}let b=(A,k)=>{let T=h[k];return{id:k,slug:T,title:Ne==="tags"?i[T].title:qt(A,i[T].title??""),content:qt(A,i[T].content??"",!0),tags:E(A.substring(1),i[T].tags)}};function E(A,k){return!k||Ne!=="tags"?[]:k.map(T=>T.toLowerCase().includes(A.toLowerCase())?`<li><p class="match-tag">#${T}</p></li>`:`<li><p>#${T}</p></li>`).slice(0,si)}function $(A){return new URL(Ft(t,A),location.toString())}let R=({slug:A,title:k,content:T,tags:U})=>{let W=U.length>0?`<ul class="tags">${U.join("")}</ul>`:"",V=document.createElement("a");V.classList.add("result-card"),V.id=A,V.href=$(A).toString(),V.innerHTML=`
      <h3 class="card-title">${k}</h3>
      ${W}
      <p class="card-description">${T}</p>
    `,V.addEventListener("click",re=>{re.altKey||re.ctrlKey||re.metaKey||re.shiftKey||g()});let le=re=>{re.altKey||re.ctrlKey||re.metaKey||re.shiftKey||g()};async function je(re){if(!re.target)return;let gt=re.target;await C(gt)}return V.addEventListener("mouseenter",je),window.addCleanup(()=>V.removeEventListener("mouseenter",je)),V.addEventListener("click",le),window.addCleanup(()=>V.removeEventListener("click",le)),V};async function K(A){if(ut(a),A.length===0?a.innerHTML=`<a class="result-card no-match">
          <h3>No results.</h3>
          <p>Try another search term?</p>
      </a>`:a.append(...A.map(R)),A.length===0&&f)ut(f);else{let k=a.firstElementChild;k.classList.add("focus"),d=k,await C(k)}}async function q(A){if(jt.has(A))return jt.get(A);let k=$(A).toString(),T=await fetch(k).then(U=>U.text()).then(U=>{if(U===void 0)throw new Error(`Could not fetch ${k}`);let W=ni.parseFromString(U??"","text/html");return Qt(W,k),[...W.getElementsByClassName("popover-hint")]});return jt.set(A,T),T}async function C(A){if(!o||!u||!A||!f)return;let k=A.id,T=await q(k).then(U=>U.flatMap(W=>[...li(pe,W).children]));w=document.createElement("div"),w.classList.add("preview-inner"),w.append(...T),f.replaceChildren(w),[...f.getElementsByClassName("highlight")].sort((U,W)=>W.innerHTML.length-U.innerHTML.length)[0]?.scrollIntoView({block:"start"})}async function I(A){if(!o||!Qe)return;pe=A.target.value,o.classList.toggle("display-results",pe!==""),Ne=pe.startsWith("#")?"tags":"basic";let k;if(Ne==="tags"){pe=pe.substring(1).trim();let W=pe.indexOf(" ");if(W!=-1){let V=pe.substring(0,W),le=pe.substring(W+1).trim();k=await Qe.searchAsync({query:le,limit:Math.max(pt,1e4),index:["title","content"],tag:{tags:V}});for(let je of k)je.result=je.result.slice(0,pt);Ne="basic",pe=le}else k=await Qe.searchAsync({query:pe,limit:pt,index:["tags"]})}else Ne==="basic"&&(k=await Qe.searchAsync({query:pe,limit:pt,index:["title","content"]}));let T=W=>{let V=k.filter(le=>le.field===W);return V.length===0?[]:[...V[0].result]},U=[...new Set([...T("title"),...T("content"),...T("tags")])].map(W=>b(pe,W));await K(U)}document.addEventListener("keydown",x),window.addCleanup(()=>document.removeEventListener("keydown",x)),s.addEventListener("click",()=>p("basic")),window.addCleanup(()=>s.removeEventListener("click",()=>p("basic"))),l.addEventListener("input",I),window.addCleanup(()=>l.removeEventListener("input",I)),Gt(n,g),await hi(i)}var Kt=!1;async function hi(e){if(Kt)return;let t=0,i=[];for(let[n,r]of Object.entries(e))i.push(Qe.addAsync(t++,{id:t,slug:n,title:r.title,content:r.content,tags:r.tags}));await Promise.all(i),Kt=!0}document.addEventListener("nav",async e=>{let t=e.detail.url,i=await fetchData,n=document.getElementsByClassName("search");for(let r of n)await oi(r,t,i)})})(),(function(){var ge=new IntersectionObserver(F=>{for(let ee of F){let se=ee.target.id,te=document.querySelectorAll(`a[data-for="${se}"]`),Oe=ee.rootBounds?.height;Oe&&te.length>0&&(ee.boundingClientRect.y<Oe?te.forEach(ie=>ie.classList.add("in-view")):te.forEach(ie=>ie.classList.remove("in-view")))}});function oe(){this.classList.toggle("collapsed"),this.setAttribute("aria-expanded",this.getAttribute("aria-expanded")==="true"?"false":"true");let F=this.nextElementSibling;F&&F.classList.toggle("collapsed")}function he(){for(let F of document.getElementsByClassName("toc")){let ee=F.querySelector(".toc-header"),se=F.querySelector(".toc-content");if(!ee||!se)return;ee.addEventListener("click",oe),window.addCleanup(()=>ee.removeEventListener("click",oe))}}document.addEventListener("nav",()=>{he(),ge.disconnect(),document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]").forEach(F=>ge.observe(F))})})(),(function(){document.addEventListener("nav",ge=>{const oe=new IntersectionObserver(ee=>{for(const se of ee){const te=se.target.parentElement;if(!te)return;se.isIntersecting?te.classList.remove("gradient-active"):te.classList.add("gradient-active")}}),he=document.getElementById("list-0");if(!he)return;const F=he.querySelector(".overflow-end");F&&(oe.observe(F),window.addCleanup(()=>oe.disconnect()))})})(),(function(){document.addEventListener("nav",ge=>{const oe=new IntersectionObserver(ee=>{for(const se of ee){const te=se.target.parentElement;if(!te)return;se.isIntersecting?te.classList.remove("gradient-active"):te.classList.add("gradient-active")}}),he=document.getElementById("list-1");if(!he)return;const F=he.querySelector(".overflow-end");F&&(oe.observe(F),window.addCleanup(()=>oe.disconnect()))})})(),(function(){var ge=Object.create,oe=Object.defineProperty,he=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,ee=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty,te=(m,y)=>()=>(y||m((y={exports:{}}).exports,y),y.exports),Oe=(m,y,v,M)=>{if(y&&typeof y=="object"||typeof y=="function")for(let P of F(y))!se.call(m,P)&&P!==v&&oe(m,P,{get:()=>y[P],enumerable:!(M=he(y,P))||M.enumerable});return m},ie=(m,y,v)=>(v=m!=null?ge(ee(m)):{},Oe(y||!m||!m.__esModule?oe(v,"default",{value:m,enumerable:!0}):v,m)),qe=te((m,y)=>{"use strict";y.exports=M;function v(z){return z instanceof Buffer?Buffer.from(z):new z.constructor(z.buffer.slice(),z.byteOffset,z.length)}function M(z){if(z=z||{},z.circles)return P(z);let L=new Map;if(L.set(Date,_=>new Date(_)),L.set(Map,(_,G)=>new Map(D(Array.from(_),G))),L.set(Set,(_,G)=>new Set(D(Array.from(_),G))),z.constructorHandlers)for(let _ of z.constructorHandlers)L.set(_[0],_[1]);let H=null;return z.proto?ce:Q;function D(_,G){let B=Object.keys(_),S=new Array(B.length);for(let J=0;J<B.length;J++){let O=B[J],Z=_[O];typeof Z!="object"||Z===null?S[O]=Z:Z.constructor!==Object&&(H=L.get(Z.constructor))?S[O]=H(Z,G):ArrayBuffer.isView(Z)?S[O]=v(Z):S[O]=G(Z)}return S}function Q(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return D(_,Q);if(_.constructor!==Object&&(H=L.get(_.constructor)))return H(_,Q);let G={};for(let B in _){if(Object.hasOwnProperty.call(_,B)===!1)continue;let S=_[B];typeof S!="object"||S===null?G[B]=S:S.constructor!==Object&&(H=L.get(S.constructor))?G[B]=H(S,Q):ArrayBuffer.isView(S)?G[B]=v(S):G[B]=Q(S)}return G}function ce(_){if(typeof _!="object"||_===null)return _;if(Array.isArray(_))return D(_,ce);if(_.constructor!==Object&&(H=L.get(_.constructor)))return H(_,ce);let G={};for(let B in _){let S=_[B];typeof S!="object"||S===null?G[B]=S:S.constructor!==Object&&(H=L.get(S.constructor))?G[B]=H(S,ce):ArrayBuffer.isView(S)?G[B]=v(S):G[B]=ce(S)}return G}}function P(z){let L=[],H=[],D=new Map;if(D.set(Date,B=>new Date(B)),D.set(Map,(B,S)=>new Map(ce(Array.from(B),S))),D.set(Set,(B,S)=>new Set(ce(Array.from(B),S))),z.constructorHandlers)for(let B of z.constructorHandlers)D.set(B[0],B[1]);let Q=null;return z.proto?G:_;function ce(B,S){let J=Object.keys(B),O=new Array(J.length);for(let Z=0;Z<J.length;Z++){let me=J[Z],de=B[me];if(typeof de!="object"||de===null)O[me]=de;else if(de.constructor!==Object&&(Q=D.get(de.constructor)))O[me]=Q(de,S);else if(ArrayBuffer.isView(de))O[me]=v(de);else{let lt=L.indexOf(de);lt!==-1?O[me]=H[lt]:O[me]=S(de)}}return O}function _(B){if(typeof B!="object"||B===null)return B;if(Array.isArray(B))return ce(B,_);if(B.constructor!==Object&&(Q=D.get(B.constructor)))return Q(B,_);let S={};L.push(B),H.push(S);for(let J in B){if(Object.hasOwnProperty.call(B,J)===!1)continue;let O=B[J];if(typeof O!="object"||O===null)S[J]=O;else if(O.constructor!==Object&&(Q=D.get(O.constructor)))S[J]=Q(O,_);else if(ArrayBuffer.isView(O))S[J]=v(O);else{let Z=L.indexOf(O);Z!==-1?S[J]=H[Z]:S[J]=_(O)}}return L.pop(),H.pop(),S}function G(B){if(typeof B!="object"||B===null)return B;if(Array.isArray(B))return ce(B,G);if(B.constructor!==Object&&(Q=D.get(B.constructor)))return Q(B,G);let S={};L.push(B),H.push(S);for(let J in B){let O=B[J];if(typeof O!="object"||O===null)S[J]=O;else if(O.constructor!==Object&&(Q=D.get(O.constructor)))S[J]=Q(O,G);else if(ArrayBuffer.isView(O))S[J]=v(O);else{let Z=L.indexOf(O);Z!==-1?S[J]=H[Z]:S[J]=G(O)}}return L.pop(),H.pop(),S}}}),We=m=>(y,v)=>y[`node${m}`]===v[`node${m}`],j=We("Name"),ne=We("Type"),Ce=We("Value");function X(m,y){if(m.attributes.length===0&&y.attributes.length===0)return[];let v=[],M=new Map,P=new Map;for(let z of m.attributes)M.set(z.name,z.value);for(let z of y.attributes){let L=M.get(z.name);z.value===L?M.delete(z.name):(typeof L<"u"&&M.delete(z.name),P.set(z.name,z.value))}for(let z of M.keys())v.push({type:5,name:z});for(let[z,L]of P.entries())v.push({type:4,name:z,value:L});return v}function ae(m,y=!0){let v=`${m.localName}`;for(let{name:M,value:P}of m.attributes)y&&M.startsWith("data-")||(v+=`[${M}=${P}]`);return v+=m.innerHTML,v}function be(m){switch(m.tagName){case"BASE":case"TITLE":return m.localName;case"META":{if(m.hasAttribute("name"))return`meta[name="${m.getAttribute("name")}"]`;if(m.hasAttribute("property"))return`meta[name="${m.getAttribute("property")}"]`;break}case"LINK":{if(m.hasAttribute("rel")&&m.hasAttribute("href"))return`link[rel="${m.getAttribute("rel")}"][href="${m.getAttribute("href")}"]`;if(m.hasAttribute("href"))return`link[href="${m.getAttribute("href")}"]`;break}}return ae(m)}function ze(m){let[y,v=""]=m.split("?");return`${y}?t=${Date.now()}&${v.replace(/t=\d+/g,"")}`}function Le(m){if(m.nodeType===1&&m.hasAttribute("data-persist"))return m;if(m.nodeType===1&&m.localName==="script"){let y=document.createElement("script");for(let{name:v,value:M}of m.attributes)v==="src"&&(M=ze(M)),y.setAttribute(v,M);return y.innerHTML=m.innerHTML,y}return m.cloneNode(!0)}function yt(m,y){if(m.children.length===0&&y.children.length===0)return[];let v=[],M=new Map,P=new Map,z=new Map;for(let L of m.children)M.set(be(L),L);for(let L of y.children){let H=be(L),D=M.get(H);D?ae(L,!1)!==ae(D,!1)&&P.set(H,Le(L)):z.set(H,Le(L)),M.delete(H)}for(let L of m.childNodes){if(L.nodeType===1){let H=be(L);if(M.has(H)){v.push({type:1});continue}else if(P.has(H)){let D=P.get(H);v.push({type:3,attributes:X(L,D),children:et(L,D)});continue}}v.push(void 0)}for(let L of z.values())v.push({type:0,node:Le(L)});return v}function et(m,y){let v=[],M=Math.max(m.childNodes.length,y.childNodes.length);for(let P=0;P<M;P++){let z=m.childNodes.item(P),L=y.childNodes.item(P);v[P]=Ue(z,L)}return v}function Ue(m,y){if(!m)return{type:0,node:Le(y)};if(!y)return{type:1};if(ne(m,y)){if(m.nodeType===3){let v=m.nodeValue,M=y.nodeValue;if(v.trim().length===0&&M.trim().length===0)return}if(m.nodeType===1){if(j(m,y)){let v=m.tagName==="HEAD"?yt:et;return{type:3,attributes:X(m,y),children:v(m,y)}}return{type:2,node:Le(y)}}else return m.nodeType===9?Ue(m.documentElement,y.documentElement):Ce(m,y)?void 0:{type:2,value:y.nodeValue}}return{type:2,node:Le(y)}}function tt(m,y){if(y.length!==0)for(let{type:v,name:M,value:P}of y)v===5?m.removeAttribute(M):v===4&&m.setAttribute(M,P)}async function ve(m,y,v){if(!y)return;let M;switch(m.nodeType===9?(m=m.documentElement,M=m):v?M=v:M=m,y.type){case 0:{let{node:P}=y;m.appendChild(P);return}case 1:{if(!M)return;m.removeChild(M);return}case 2:{if(!M)return;let{node:P,value:z}=y;if(typeof z=="string"){M.nodeValue=z;return}M.replaceWith(P);return}case 3:{if(!M)return;let{attributes:P,children:z}=y;tt(M,P);let L=Array.from(M.childNodes);await Promise.all(z.map((H,D)=>ve(M,H,L[D])));return}}}function xe(m,y){let v=Ue(m,y);return ve(m,v)}var it=Object.hasOwnProperty,ke=ie(qe(),1),bt=(0,ke.default)();function Se(m){return m.document.body.dataset.slug}var Ke=(m,y,v)=>{let M=new URL(m.getAttribute(y),v);m.setAttribute(y,M.pathname+M.hash)};function rt(m,y){m.querySelectorAll('[href=""], [href^="./"], [href^="../"]').forEach(v=>Ke(v,"href",y)),m.querySelectorAll('[src=""], [src^="./"], [src^="../"]').forEach(v=>Ke(v,"src",y))}var nt=/<link rel="canonical" href="([^"]*)">/;async function st(m){let y=await fetch(`${m}`);if(!y.headers.get("content-type")?.startsWith("text/html"))return y;let v=await y.clone().text(),[M,P]=v.match(nt)??[];return P?fetch(`${new URL(P,m)}`):y}var Je=1,Me=document.createElement("route-announcer"),Be=m=>m?.nodeType===Je,fe=m=>{try{let y=new URL(m);if(window.location.origin===y.origin)return!0}catch{}return!1},ue=m=>{let y=m.origin===window.location.origin,v=m.pathname===window.location.pathname;return y&&v},De=({target:m})=>{if(!Be(m)||m.attributes.getNamedItem("target")?.value==="_blank")return;let y=m.closest("a");if(!y||"routerIgnore"in y.dataset)return;let{href:v}=y;if(fe(v))return{url:new URL(v),scroll:"routerNoscroll"in y.dataset?!1:void 0}};function Ge(m){let y=new CustomEvent("nav",{detail:{url:m}});document.dispatchEvent(y)}var ye=new Set;window.addCleanup=m=>ye.add(m);function Pe(){let m=document.createElement("div");m.className="navigation-progress",m.style.width="0",document.body.contains(m)||document.body.appendChild(m),setTimeout(()=>{m.style.width="80%"},100)}var Ve=!1,Te;async function Xe(m,y=!1){Ve=!0,Pe(),Te=Te||new DOMParser;let v=await st(m).then(L=>{if(L.headers.get("content-type")?.startsWith("text/html"))return L.text();window.location.assign(m)}).catch(()=>{window.location.assign(m)});if(!v)return;let M=new CustomEvent("prenav",{detail:{}});document.dispatchEvent(M),ye.forEach(L=>L()),ye.clear();let P=Te.parseFromString(v,"text/html");rt(P,m);let z=P.querySelector("title")?.textContent;if(z)document.title=z;else{let L=document.querySelector("h1");z=L?.innerText??L?.textContent??m.pathname}Me.textContent!==z&&(Me.textContent=z),Me.dataset.persist="",P.body.appendChild(Me),xe(document.body,P.body),y||(m.hash?document.getElementById(decodeURIComponent(m.hash.substring(1)))?.scrollIntoView():window.scrollTo({top:0})),document.head.querySelectorAll(":not([data-persist])").forEach(L=>L.remove()),P.head.querySelectorAll(":not([data-persist])").forEach(L=>document.head.appendChild(L)),y||history.pushState({},"",m),Ge(Se(window)),delete Me.dataset.persist}async function $e(m,y=!1){if(!Ve){Ve=!0;try{await Xe(m,y)}catch(v){console.error(v),window.location.assign(m)}finally{Ve=!1}}}window.spaNavigate=$e;function He(){return typeof window<"u"&&(window.addEventListener("click",async m=>{let{url:y}=De(m)??{};if(!(!y||m.ctrlKey||m.metaKey)){if(m.preventDefault(),ue(y)&&y.hash){document.getElementById(decodeURIComponent(y.hash.substring(1)))?.scrollIntoView(),history.pushState({},"",y);return}$e(y,!1)}}),window.addEventListener("popstate",m=>{let{url:y}=De(m)??{};window.location.hash&&window.location.pathname===y?.pathname||$e(new URL(window.location.toString()),!0)})),new class{go(m){let y=new URL(m,window.location.toString());return $e(y,!1)}back(){return window.history.back()}forward(){return window.history.forward()}}}if(He(),Ge(Se(window)),!customElements.get("route-announcer")){let m={"aria-live":"assertive","aria-atomic":"true",style:"position: absolute; left: 0; top: 0; clip: rect(0 0 0 0); clip-path: inset(50%); overflow: hidden; white-space: nowrap; width: 1px; height: 1px"};customElements.define("route-announcer",class extends HTMLElement{constructor(){super()}connectedCallback(){for(let[y,v]of Object.entries(m))this.setAttribute(y,v)}})}})();
